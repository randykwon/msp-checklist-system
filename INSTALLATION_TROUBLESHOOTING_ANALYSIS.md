# 설치 장애 원인 분석 및 해결 방안

## 🚨 주요 설치 장애 원인

### 1. 네트워크 관련 문제
- **npm install 타임아웃**: 패키지 다운로드 중 연결 끊김
- **GitHub 클론 실패**: 네트워크 불안정으로 저장소 접근 실패
- **외부 API 연결 실패**: NodeSource, EPEL 저장소 접근 문제

### 2. 메모리 부족 문제
- **npm install 중 메모리 부족**: 특히 pdfjs-dist, Next.js 빌드 시
- **빌드 프로세스 중단**: 메모리 부족으로 Node.js 프로세스 종료
- **시스템 응답 없음**: 스왑 없는 환경에서 메모리 고갈

### 3. 권한 및 파일 시스템 문제
- **디렉토리 생성 실패**: /opt 디렉토리 권한 문제
- **파일 쓰기 권한 없음**: npm 캐시, 로그 파일 생성 실패
- **SELinux 차단**: Amazon Linux에서 파일 접근 차단

### 4. 의존성 충돌 문제
- **Node.js 버전 불일치**: 기존 설치와 새 설치 간 충돌
- **npm 캐시 손상**: 이전 설치의 손상된 캐시 파일
- **패키지 버전 충돌**: peer dependency 문제

### 5. 시스템 리소스 문제
- **디스크 공간 부족**: /tmp, /var, /opt 디스크 공간 부족
- **파일 디스크립터 한계**: 동시 파일 열기 제한 초과
- **프로세스 한계**: 시스템 프로세스 수 제한

### 6. 서비스 충돌 문제
- **포트 사용 중**: 3010, 3011 포트가 이미 사용 중
- **기존 프로세스 잔존**: 이전 설치의 프로세스가 남아있음
- **방화벽 차단**: 설치 중 필요한 포트 차단

## 🛠️ 해결 방안

### 1. 네트워크 안정성 강화
- 재시도 메커니즘 구현
- 타임아웃 설정 최적화
- 미러 서버 사용
- 연결 상태 사전 확인

### 2. 메모리 관리 개선
- 스왑 파일 자동 생성
- Node.js 메모리 제한 설정
- 단계별 메모리 확인
- 메모리 부족 시 자동 대응

### 3. 권한 문제 해결
- 사전 권한 확인 및 설정
- SELinux 설정 자동 조정
- 임시 디렉토리 권한 설정
- 사용자 권한 검증

### 4. 의존성 관리 강화
- 캐시 정리 자동화
- 버전 호환성 검증
- 단계별 의존성 설치
- 실패 시 롤백 메커니즘

### 5. 리소스 모니터링
- 실시간 리소스 확인
- 임계값 도달 시 경고
- 자동 정리 메커니즘
- 설치 전 사전 검증

### 6. 프로세스 관리 개선
- 기존 프로세스 완전 정리
- 포트 사용 상태 확인
- 서비스 충돌 방지
- 안전한 재시작 메커니즘